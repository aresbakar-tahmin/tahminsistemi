
<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tahmin Sistemi - Ares</title>
  <style>
    body {
      background: #0f0f0f;
      color: #f1f1f1;
      font-family: 'Courier New', monospace;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      gap: 15px;
    }
    input, button {
      padding: 10px;
      font-size: 16px;
      border: none;
      border-radius: 6px;
    }
    input {
      width: 200px;
      text-align: center;
    }
    button {
      background: #222;
      color: #00ff88;
      cursor: pointer;
    }
    button:hover {
      background: #00ff88;
      color: #000;
    }
    .box {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
    }
  </style>
</head>
<body>
  <h2>ðŸ”® Ã–ÄŸrenen Tahmin Sistemi (Lineer)</h2>
  <div class="box">
    <input type="number" id="baslangic" placeholder="BaÅŸlangÄ±Ã§ sayÄ±sÄ±">
    <input type="number" id="gercek" placeholder="GerÃ§ek sayÄ±">
    <button id="tahminKaydet">Tahmin Et ve Kaydet</button>
    <p id="sonuc"></p>
  </div>

  <!-- ModÃ¼ler Firebase SDK -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
    import { getDatabase, ref, set, get, child } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";

    const firebaseConfig = {
      databaseURL: "https://tahminsistemi-ars2025-default-rtdb.firebaseio.com/"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    const baslangicInput = document.getElementById("baslangic");
    const gercekInput = document.getElementById("gercek");
    const tahminKaydetBtn = document.getElementById("tahminKaydet");
    const sonucP = document.getElementById("sonuc");

    let sayac = 0;
    let sonTahminler = []; // Lineer Ã¶ÄŸrenme iÃ§in son tahminler

    tahminKaydetBtn.addEventListener("click", async () => {
      const baslangic = parseFloat(baslangicInput.value);
      const gercek = parseFloat(gercekInput.value);

      if (isNaN(baslangic) || isNaN(gercek)) {
        alert("LÃ¼tfen baÅŸlangÄ±Ã§ ve gerÃ§ek sayÄ±yÄ± gir!");
        return;
      }

      // Lineer tahmin: son 5 kaydÄ±n ortalamasÄ± (basit Ã¶ÄŸrenme)
      let tahmin;
      if (sonTahminler.length === 0) {
        tahmin = baslangic + (Math.random() * 2 - 1);
      } else {
        const ort = sonTahminler.reduce((a,b) => a+b,0)/sonTahminler.length;
        tahmin = ort + (Math.random() * 0.5 - 0.25); // hafif rastgele sapma
      }

      sayac++;
      const veri = {
        id: sayac,
        baslangic: baslangic,
        tahmin: tahmin,
        gercek: gercek,
        fark: Math.abs(tahmin - gercek),
        tarih: new Date().toLocaleString("tr-TR")
      };

      await set(ref(db, "tahminler/" + sayac), veri);

      // Lineer Ã¶ÄŸrenme dizisini gÃ¼ncelle
      sonTahminler.push(gercek);
      if (sonTahminler.length > 5) sonTahminler.shift(); // son 5 kaydÄ± tut

      sonucP.textContent = `ðŸ“Š Tahmin: ${tahmin.toFixed(3)} | âœ… KayÄ±t ${sayac} eklendi. Fark: ${veri.fark.toFixed(3)}`;

      baslangicInput.value = "";
      gercekInput.value = "";
    });
  </script>
</body>
</html>